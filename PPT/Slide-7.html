<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Motion Client Implementation</title>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&amp;family=Roboto:wght@300;400;500;700&amp;family=Roboto+Mono:wght@400;500;700&amp;display=swap" rel="stylesheet"/>
<style>
        body {
            margin: 0;
            padding: 0;
            width: 1280px;
            height: 720px;
            font-family: 'Roboto', sans-serif;
            overflow: hidden;
            background-color: #f8fafc;
        }
        .slide-container {
            width: 1280px;
            height: 720px;
            display: flex;
            flex-direction: column;
        }
        .font-heading {
            font-family: 'Montserrat', sans-serif;
        }
        .font-mono {
            font-family: 'Roboto Mono', monospace;
        }
        .code-editor {
            background-color: #1e1e1e;
            color: #d4d4d4;
        }
        .syntax-kw { color: #c586c0; } /* Keyword */
        .syntax-func { color: #dcdcaa; } /* Function */
        .syntax-str { color: #ce9178; } /* String */
        .syntax-comment { color: #6a9955; } /* Comment */
        .syntax-num { color: #b5cea8; } /* Number */
        .syntax-type { color: #4ec9b0; } /* Type */
        .syntax-var { color: #9cdcfe; } /* Variable */
        
        .line-num {
            color: #858585;
            text-align: right;
            padding-right: 1rem;
            user-select: none;
            border-right: 1px solid #333;
            margin-right: 1rem;
            min-width: 1.5rem;
        }
        
        /* Custom scrollbar for code */
        .code-scroll::-webkit-scrollbar {
            width: 8px;
        }
        .code-scroll::-webkit-scrollbar-track {
            background: #1e1e1e;
        }
        .code-scroll::-webkit-scrollbar-thumb {
            background: #424242;
            border-radius: 4px;
        }
    </style>
</head>
<body>
<div class="slide-container bg-white">
<!-- Header -->
<div class="bg-gray-900 text-white h-24 px-12 flex items-center justify-between shadow-md z-20 relative">
<div class="flex items-center">
<div class="w-12 h-12 bg-green-600 rounded-lg flex items-center justify-center mr-6 shadow-lg">
<i class="fa-solid fa-terminal text-2xl"></i>
</div>
<div>
<h1 class="font-heading text-3xl font-bold tracking-wide">Motion Client (Python)</h1>
<p class="text-gray-400 text-sm mt-1">Case Study-3: Calling the Service</p>
</div>
</div>
<div class="text-right">
<span class="px-4 py-1 bg-gray-800 rounded-full text-xs text-green-400 font-mono border border-gray-700">Step 6 of 8</span>
</div>
</div>
<!-- Main Content -->
<div class="flex flex-1 overflow-hidden">
<!-- Left Column: Code Implementation -->
<div class="w-7/12 bg-gray-800 p-8 flex flex-col relative border-r border-gray-700">
<!-- Code Editor Window -->
<div class="code-editor rounded-lg shadow-2xl flex flex-col h-full overflow-hidden border border-gray-700">
<!-- Editor Tab -->
<div class="bg-gray-900 px-4 py-2 flex items-center space-x-2 border-b border-gray-800">
<div class="flex space-x-1.5 mr-4">
<div class="w-3 h-3 rounded-full bg-red-500"></div>
<div class="w-3 h-3 rounded-full bg-yellow-500"></div>
<div class="w-3 h-3 rounded-full bg-green-500"></div>
</div>
<div class="bg-gray-800 text-gray-300 text-xs font-mono px-3 py-1 rounded-t flex items-center border-t border-l border-r border-gray-700 relative top-1">
<i class="fa-brands fa-python mr-2 text-yellow-500"></i> motion_client.py
                        </div>
</div>
<!-- Code Content -->
<div class="p-4 font-mono text-sm leading-relaxed overflow-y-auto code-scroll flex-1">
<div class="flex"><span class="line-num">1</span><span><span class="syntax-kw">import</span> <span class="syntax-var">sys</span></span></div>
<div class="flex"><span class="line-num">2</span><span><span class="syntax-kw">import</span> <span class="syntax-var">rospy</span></span></div>
<div class="flex"><span class="line-num">3</span><span><span class="syntax-kw">from</span> <span class="syntax-var">case_study3_turtlesim_service.srv</span> <span class="syntax-kw">import</span> <span class="syntax-type">RunMotion</span>, <span class="syntax-type">RunMotionRequest</span></span></div>
<div class="flex"><span class="line-num">4</span><span></span></div>
<div class="flex"><span class="line-num">5</span><span><span class="syntax-kw">def</span> <span class="syntax-func">main</span>():</span></div>
<div class="flex"><span class="line-num">6</span><span>    rospy.<span class="syntax-func">init_node</span>(<span class="syntax-str">"turtlesim_motion_client"</span>)</span></div>
<div class="flex"><span class="line-num">7</span><span></span></div>
<div class="flex"><span class="line-num">8</span><span> <span class="syntax-comment"># 1. Parse Arguments (default to 'circle')</span></span></div>
<div class="flex"><span class="line-num">9</span><span> <span class="syntax-kw">if</span> <span class="syntax-func">len</span>(<span class="syntax-var">sys.argv</span>) &gt;= <span class="syntax-num">2</span>:</span></div>
<div class="flex"><span class="line-num">10</span><span> <span class="syntax-var">mode</span> = <span class="syntax-var">sys.argv</span>[<span class="syntax-num">1</span>]</span></div>
<div class="flex"><span class="line-num">11</span><span> <span class="syntax-kw">else</span>:</span></div>
<div class="flex"><span class="line-num">12</span><span> <span class="syntax-var">mode</span> = <span class="syntax-str">"circle"</span></span></div>
<div class="flex"><span class="line-num">13</span><span></span></div>
<div class="flex"><span class="line-num">14</span><span> <span class="syntax-comment"># 2. Robustness: Block until server is ready</span></span></div>
<div class="flex"><span class="line-num">15</span><span>    rospy.<span class="syntax-func">wait_for_service</span>(<span class="syntax-str">"/run_motion"</span>)</span></div>
<div class="flex"><span class="line-num">16</span><span></span></div>
<div class="flex"><span class="line-num">17</span><span> <span class="syntax-kw">try</span>:</span></div>
<div class="flex"><span class="line-num">18</span><span> <span class="syntax-comment"># 3. Create Proxy &amp; Call Service</span></span></div>
<div class="flex"><span class="line-num">19</span><span> <span class="syntax-var">proxy</span> = rospy.<span class="syntax-type">ServiceProxy</span>(<span class="syntax-str">"/run_motion"</span>, <span class="syntax-type">RunMotion</span>)</span></div>
<div class="flex"><span class="line-num">20</span><span> <span class="syntax-var">req</span> = <span class="syntax-type">RunMotionRequest</span>(<span class="syntax-var">mode</span>=<span class="syntax-var">mode</span>)</span></div>
<div class="flex"><span class="line-num">21</span><span> </span></div>
<div class="flex"><span class="line-num">22</span><span> <span class="syntax-var">resp</span> = <span class="syntax-func">proxy</span>(<span class="syntax-var">req</span>)</span></div>
<div class="flex"><span class="line-num">23</span><span> </span></div>
<div class="flex"><span class="line-num">24</span><span> <span class="syntax-kw">if</span> <span class="syntax-var">resp.success</span>:</span></div>
<div class="flex"><span class="line-num">25</span><span>            rospy.<span class="syntax-func">loginfo</span>(<span class="syntax-str">"Success: %s"</span>, <span class="syntax-var">resp.message</span>)</span></div>
<div class="flex"><span class="line-num">26</span><span> <span class="syntax-kw">else</span>:</span></div>
<div class="flex"><span class="line-num">27</span><span>            rospy.<span class="syntax-func">logwarn</span>(<span class="syntax-str">"Failed: %s"</span>, <span class="syntax-var">resp.message</span>)</span></div>
<div class="flex"><span class="line-num">28</span><span> </span></div>
<div class="flex"><span class="line-num">29</span><span> <span class="syntax-kw">except</span> rospy.<span class="syntax-type">ServiceException</span> <span class="syntax-kw">as</span> <span class="syntax-var">e</span>:</span></div>
<div class="flex"><span class="line-num">30</span><span>        rospy.<span class="syntax-func">logerr</span>(<span class="syntax-str">"Service call failed: %s"</span>, <span class="syntax-var">e</span>)</span></div>
<div class="flex mt-4"><span class="line-num">31</span><span><span class="syntax-kw">if</span> <span class="syntax-var">__name__</span> == <span class="syntax-str">"__main__"</span>:</span></div>
<div class="flex"><span class="line-num">32</span><span> <span class="syntax-func">main</span>()</span></div>
</div>
</div>
</div>
<!-- Right Column: Explanations -->
<div class="w-5/12 bg-gray-50 p-8 flex flex-col overflow-y-auto">
<!-- Service Proxy Card -->
<div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200 mb-6 hover:shadow-md transition-shadow">
<div class="flex items-center mb-3">
<div class="w-8 h-8 rounded-full bg-green-100 flex items-center justify-center text-green-600 mr-3">
<i class="fa-solid fa-link text-sm"></i>
</div>
<h3 class="font-heading text-lg font-bold text-gray-800">The Service Proxy</h3>
</div>
<p class="text-sm text-gray-600 leading-relaxed mb-3">
                        A <code>ServiceProxy</code> is a wrapper that makes a remote service call look like a local function call. It handles serialization, network transmission, and deserialization.
                    </p>
<div class="bg-gray-100 p-2 rounded text-xs font-mono text-gray-700 border border-gray-300">
                        proxy = rospy.ServiceProxy(service_name, ServiceType)
                    </div>
</div>
<!-- Safety & Robustness Card -->
<div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200 mb-6 hover:shadow-md transition-shadow border-l-4 border-l-yellow-400">
<div class="flex items-center mb-3">
<div class="w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center text-yellow-600 mr-3">
<i class="fa-solid fa-shield-halved text-sm"></i>
</div>
<h3 class="font-heading text-lg font-bold text-gray-800">Robustness</h3>
</div>
<ul class="space-y-2 text-sm text-gray-600">
<li class="flex items-start">
<i class="fa-solid fa-hourglass-half text-blue-500 mt-1 mr-2 text-xs"></i>
<p><strong>wait_for_service:</strong> Crucial! Blocks execution until the service is actually advertised. Prevents crashing on startup.</p>
</li>
<li class="flex items-start">
<i class="fa-solid fa-triangle-exclamation text-red-500 mt-1 mr-2 text-xs"></i>
<p><strong>try...except:</strong> Catches <code>rospy.ServiceException</code> if the network fails or the server crashes during the call.</p>
</li>
</ul>
</div>
<!-- Command Line Args Card -->
<div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow flex-1">
<div class="flex items-center mb-3">
<div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 mr-3">
<i class="fa-solid fa-code text-sm"></i>
</div>
<h3 class="font-heading text-lg font-bold text-gray-800">Dynamic Execution</h3>
</div>
<p class="text-sm text-gray-600 mb-2">
                        We use <code>sys.argv</code> to pass the motion mode directly from the terminal.
                    </p>
<div class="bg-gray-800 text-green-400 p-3 rounded-lg text-xs font-mono mb-2">
                        $ rosrun case_study3_turtlesim_service motion_client.py square
                    </div>
<p class="text-xs text-gray-500 italic">
                        If no argument is provided, it defaults to "circle".
                    </p>
</div>
</div>
</div>
</div>
</body>
</html>